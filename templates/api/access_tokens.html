{% extends "accounts/_section.html" %}


{% block title %}{{user.username}} - Granted permissions{% endblock %}

{% block section_content %}
    <h1>Your granted permissions</h1>

     {% if tokens %}
     <p>This is the list of applications that you granted permission to use your credentials.
     You can revoke the permission to any of the applications using this list.
     <br>If you saw the "granted permission" page and still the application is not listed in this page, that means the application did not correctly finish the last step of the authorization process and will not be able to act on your behalf.

    <table>
        <tr><th>Application name</th><th>Date granted permission</th><th>Status</th><th></th></tr>
        {% for token in tokens %}
            <tr><td>{{ token.consumer_name }}</td><td>{{ token.date }}</td><td style="background-color:{% if token.enabled %}#00FF00{% else %}#FF0000{% endif %};">{% if token.enabled %}Application has access{% else %}Application does not have access{% endif %}</td>
                <td>
                {% if token.enabled %}
                    <a href="{% url revoke-permission token.consumer_key %}">Revoke access</a>
                {% else %}
                    <a href="{% url give-permission token.consumer_key %}">Give access</a>
                {% endif %}
                </td>
            </tr>
        {% endfor %}
    </table>
    {% else %}
         <p>Currently you have not granted any permission to any third-party application.</p>
    {% endif %}


{% endblock %}